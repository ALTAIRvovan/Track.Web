{% extends 'app.html' %}

{% block title %}Главная страница расписаний{% endblock %}

{% block content %}
    {% load int_filters %}
    <h1>{{ timetable.name }}</h1>
    {% if timetable.owner == user %}
    <a href="{% url "calendar:cell.create" timetable=timetable.id %}" class="btn btn-primary">Добавить ячейку</a>
    {% endif %}
    <div id="timetable">
        {% with timetable.cell_set.all as cells %}
        {% for daySym in '1234567' %}
            <div class="row">
                {% with forloop.counter as day %}
                {% for cell in cells  %}
                    {% if cell.dayOfWeek == day %}
                        <div data-time="{{ cell.getStartTime }}" style="position: absolute; left: 0; top: {{ cell.getStartTime }}px; display: block;">
                            {% include "Cell.html" with cell=cell %}
                        </div>
                    {% endif %}
                {% endfor %}
                {% endwith %}
            </div>
        {% endfor %}
            <div style="clear: both"></div>
        {% endwith %}
    </div>
    
{% endblock %}